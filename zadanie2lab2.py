from cmath import sqrt
import numpy as np
import matplotlib.pyplot as plt

n = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])
x = np.array([26, 48, 65, 23, 150, 123, 264, 156, 152, 154, 520, 515])
y = np.array([221, 153, 155, 102, 156, 264, 435, 156, 203, 325, 456, 163])
print("x:", x)
print("y:", y)

x_sum = np.sum(x)
y_sum = np.sum(y)
print("—Å—É–º–º–∞ x:", x_sum)
print("—Å—É–º–º–∞ y:", y_sum)

xy = x * y
xy_sum = np.sum(xy)
print("x*y:", xy)
print("—Å—É–º–º–∞ x*y", xy_sum)

x_squared = x**2
y_squared = y**2
print("x^2:", x_squared)
print("y^2:", y_squared)

x_squared_sum = np.sum(x_squared)
y_squared_sum = np.sum(y_squared)
print("—Å—É–º–º–∞ x^2:", x_squared_sum)
print("—Å—É–º–º–∞ y^2:", y_squared_sum)

x_mean = np.mean(x)
y_mean = np.mean(y)
print("—Å—Ä–µ–¥–Ω–µ–µ x:", x_mean)
print("—Å—Ä–µ–¥–Ω–µ–µ y:", y_mean)

x_diff = x - x_mean
y_diff = y - y_mean
print("xi - x —Å—Ä–µ–¥–Ω–µ–µ:", x_diff)
print("yi - y —Å—Ä–µ–¥–Ω–µ–µ:", y_diff)

x_diff_sum = np.sum(x_diff)
y_diff_sum = np.sum(y_diff)
print("—Å—É–º–º–∞ xi - x —Å—Ä–µ–¥–Ω–µ–µ:", x_diff_sum)
print("—Å—É–º–º–∞ yi - y —Å—Ä–µ–¥–Ω–µ–µ:", y_diff_sum)

x_diff_squared = (x - x_mean)**2
y_diff_squared = (y - y_mean)**2
print("(xi - x —Å—Ä–µ–¥–Ω–µ–µ)^2:", x_diff_squared)
print("(yi - y —Å—Ä–µ–¥–Ω–µ–µ)^2:", y_diff_squared)

x_diff_squared_sum = np.sum(x_diff_squared)
y_diff_squared_sum = np.sum(y_diff_squared)
print("—Å—É–º–º–∞ xi - x —Å—Ä–µ–¥–Ω–µ–µ:", x_diff_squared_sum)
print("—Å—É–º–º–∞ yi - y —Å—Ä–µ–¥–Ω–µ–µ:", y_diff_squared_sum)

xy_mean = np.mean(xy)
print("x*y —Å—Ä–µ–¥–Ω–µ–µ:", xy_mean)

x_squared_mean = np.mean(x_squared)
y_squared_mean = np.mean(y_squared)
print("x^2 —Å—Ä–µ–¥–Ω–µ–µ:", x_squared_mean)
print("y^2 —Å—Ä–µ–¥–Ω–µ–µ:", y_squared_mean)

Dx = x_squared_mean - (x_mean)**2
Dy = y_squared_mean - (y_mean)**2
print("–¥–∏—Å–ø–µ—Ä—Å–∏—è x:", Dx)
print("–¥–∏—Å–ø–µ—Ä—Å–∏—è y:", Dy)

b = (xy_mean - x_mean * y_mean)/(Dx)
a = y_mean - b * x_mean

print("–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã —É—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏:")
print("a =", a)
print("b =", b)

Y = a + b * x

y_diff_Y = y - Y

y_diff_Y_squared = (y - Y)**2
print('(y-Y)^2', y_diff_Y_squared)

plt.scatter(x,y)
plt.plot(x, Y, color = "red")
plt.xlabel('x')
plt.ylabel('y')
plt.title('–¢–æ—á–µ—á–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –ª–∏–Ω–∏–µ–π —Ç—Ä–µ–Ω–¥–∞')
plt.show()

r = (xy_mean - x_mean * y_mean)/(sqrt(Dx) * sqrt(Dy))
print('–õ–∏–Ω–µ–π–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–∞—Ä–Ω–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏:', r)

SE = np.sqrt((1 / (12 - 1)) * np.sum(y_diff_Y_squared))
print("–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:", SE)

SE_a = SE * (np.sqrt((x_squared_sum) / (12 * x_diff_squared_sum)))
SE_b = SE**2 / (np.sqrt(x_diff_squared_sum))
print("–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ b:", SE_b)
print("–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —á–ª–µ–Ω–∞ a:", SE_a)

t_a = a / SE_a
t_b = b / SE_b
print('t_a:', t_a)
print('t_b:', t_b)

t_tabl = 2.20

D_a = t_tabl * t_a
D_b = t_tabl * t_b
print('–ø—Ä–µ–¥–µ–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ a:', D_a)
print('–ø—Ä–µ–¥–µ–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ b:', D_b)

alpha = 0.05  # –£—Ä–æ–≤–µ–Ω—å –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏

#–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
CI_a = (a - D_a, a + D_a)
CI_b = (b - D_b, b + D_b)

print("–î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ a:", CI_a)
print("–î–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –¥–ª—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ b:", CI_b)

print('–°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ t-–∫—Ä–∏—Ç–µ—Ä–∏—è –°—Ç—å—é–¥–µ–Ω—Ç–∞ —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∏ —Ä=0,05 –∏ f = 11 (f=N-1)\n'
      ' (—á–∏—Å–ª–æ —Å—Ç–µ–ø–µ–Ω–µ–π —Å–≤–æ–±–æ–¥—ã) –∑–Ω–∞—á–µ–Ω–∏–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ —Ç–∞–±–ª–∏—Ü–µ: t—Ç–∞–±–ª = 2,20, –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å\n'
      ' –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 95% –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞ –Ω–∞–¥—ë–∂–µ–Ω, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç b –Ω–µ–Ω–∞–¥—ë–∂–µ–Ω –ø—Ä–∏ –¥–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏. \n'
      '–¢–∞–∫ –∫–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è ùë°ùëé = 3.91 –±–æ–ª—å—à–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ, –¥–µ–ª–∞–µ–º –≤—ã–≤–æ–¥ –æ —Ç–æ–º, —á—Ç–æ \n'
      '–Ω–∞–±–ª—é–¥–∞–µ–º—ã–µ —Ä–∞–∑–ª–∏—á–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –∑–Ω–∞—á–∏–º—ã, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞ –Ω–∞–¥—ë–∂–µ–Ω. –ó–Ω–∞—á–µ–Ω–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏—è ùë°ùëè = 0.02\n'
      ' –º–µ–Ω—å—à–µ —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ, –∑–Ω–∞—á–∏—Ç —Ä–∞–∑–ª–∏—á–∏—è —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã—Ö –≤–µ–ª–∏—á–∏–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –∑–Ω–∞—á–∏–º—ã, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç \n'
      'b –Ω–µ–Ω–∞–¥—ë–∂–µ–Ω –ø—Ä–∏ –¥–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏.–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∏–∑-–∑–∞ –Ω–µ–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ \n'
      '–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏ b –Ω–µ —è–≤–ª—è—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏ –∏ —Å–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º–∏, –∞ —Å–∞–º–æ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç \n'
      '–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏–∫–∏. –≠—Ç–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ –±–æ–ª—å—à–æ–π –æ—à–∏–±–∫–æ–π —É—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏.')